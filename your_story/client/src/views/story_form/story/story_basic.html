<form data-ng-submit="processForm()"
  id="storyForm" name="storyForm"
  class="blocky-form"
  novalidate
  autocomplete="off"
  >

  <header class="max-width center-pseudo select-none">
    <h3 class="roboto-condensed light-weight flow-text">Highlight your {{experienceType()}} experience</h2>
  </header>

  <fieldset>
    <div class="form-line" data-ripple-effect>
        <input type="text"
        name="title" id="title"
        data-ng-model="storyFormData.title"
        spellcheck="true"
        required
        >
        <label for="title">A title for your experience</label>
        <span class="error-required" data-ng-class="{hidden: !storyForm.title.$error.required}">This field is required.</span>
    </div>
  </fieldset>

  <fieldset>
      <legend>
        <h4 class="roboto-condensed light-weight flow-text">Why was this experience important</h4>
      </legend>
      <div data-ripple-effect class="text-container">
        <textarea placeholder="Talk about your challenges and how you developed."
        spellcheck="true"
        data-ng-model="storyFormData.highlight"
        name="highlight"
        data-ng-trim="false"
        data-minwords="50"
        data-maxwords="250"
        data-ng-model-options="{allowInvalid: true}"
        required
        ></textarea>
      </div>

    <div class="highlight-validations-text">
      <span
      class="num-words" data-ng-class="{'color-red': storyForm.highlight.$invalid}">{{storyFormData.highlight|wordCounter}}/{{currentMax()}}</span>
    </div>
  </fieldset>

  <fieldset>
    <div class="form-line" data-ripple-effect>
      <angucomplete-alt id="location"
      data-pause="250"
      data-remote-url="{{statesSearchUrl}}"
      data-title-field="full_name"
      data-search-field="name"
      data-match-class="match-highlight"
      data-minlength="3"
      data-field-required="true"
      data-focus-in="autoCompleteFocusIn()"
      data-focus-out="autoCompleteFocusOut()"
      data-selected-object="autoCompleteObjectSelected"
      class="autocomplete pristine"
      ></angucomplete-alt>
      <label for="location">Location of experience (City)</label>
      <span
      class="error-required">This field is required</span>
    </div>
  </fieldset>

  <fieldset class="max-width" data-ripple-effect>
    <div class="date-wrapper flex-row-between">
      <!-- Day -->
      <div class="year-field">
        <input type="text"
        id="year"
        name="year"
        data-ng-model="storyFormData.year"
        autocapitalize="false"
        data-range
        data-range-max="3000"
        data-range-min="1900"
        data-ng-model-options="{allowInvalid: true}"
        required
        >
        <label for="year">Start Year (YYYY)</label>
        <span class="error-required display-block"
        data-ng-class='{hidden: storyForm.day.$valid}'
        >
          <span ng-show="storyForm.year.$error.required">
          This field is required.
          </span>
          <span ng-show="storyForm.year.$error.range">
          Enter a number i.e 2015.
          </span>
        </span>
      </div>
      <!-- Month -->
      <div class="month-field">
        <input type="text" id="month" name="month"
        data-ng-model="storyFormData.month"
        autocapitalize="false"
        data-range
        data-range-min="1"
        data-range-max="12"
        data-ng-model-options="{allowInvalid: true}"
        required>
        <label for="month">Start Month (MM)</label>
        <span class="error-required display-block"
        data-ng-class='{hidden: storyForm.month.$valid}'
        >
          <span ng-show="storyForm.month.$error.required">
          This field is required.
          </span>
          <span ng-show="storyForm.month.$error.range">
          Enter a number between 1 and 12.
          </span>
        </span>
      </div>
      <!-- Duration -->
      <div class="duration-field">
        <input type="text" id="duration" name="duration"
        data-ng-model="storyFormData.duration"
        autocapitalize="false"
        data-number-only
        data-ng-model-options="{allowInvalid: true}"
        required>
        <label for="duration">Duration in months</label>
        <span class="error-required display-block"
        data-ng-class='{hidden: storyForm.duration.$valid}'
        >
          <span ng-show="storyForm.duration.$error.required">
          This field is required.
          </span>
          <span ng-show="storyForm.duration.$error.numberOnly">
          Enter a number i.e 4.
          </span>
        </span>
      </div>
    </div>
  </fieldset>



<!-- Button wrapper for positioning across all forms -->
  <div class="button-wrapper">
    <div class="max-width center-pseudo">
      <div class="center-pseudo">
        <button
        data-flip="#storyFormFlipper" type="button" title="next" class="btn-raised"
        data-ng-disabled="storyForm.$invalid"
        >NEXT</button>
      </div>
    </div>
  </div>
</form>